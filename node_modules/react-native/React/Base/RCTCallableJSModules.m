/*
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

#import "RCTBridge.h"
#import "RCTBridgeModule.h"

@implementation RCTCallableJSModules {
  RCTBridgelessJSModuleMethodInvoker _bridgelessJSModuleMethodInvoker;
<<<<<<< HEAD
#ifndef RCT_FIT_RM_OLD_RUNTIME
  __weak RCTBridge *_bridge;
#endif // RCT_FIT_RM_OLD_RUNTIME
}

#ifndef RCT_FIT_RM_OLD_RUNTIME
=======
  __weak RCTBridge *_bridge;
}

>>>>>>> 2c830f7d0232ead70791aff6968a0e95ce850767
- (void)setBridge:(RCTBridge *)bridge
{
  _bridge = bridge;
}
<<<<<<< HEAD
#endif // RCT_FIT_RM_OLD_RUNTIME
=======
>>>>>>> 2c830f7d0232ead70791aff6968a0e95ce850767

- (void)setBridgelessJSModuleMethodInvoker:(RCTBridgelessJSModuleMethodInvoker)bridgelessJSModuleMethodInvoker
{
  _bridgelessJSModuleMethodInvoker = bridgelessJSModuleMethodInvoker;
}

- (void)invokeModule:(NSString *)moduleName method:(NSString *)methodName withArgs:(NSArray *)args
{
  [self invokeModule:moduleName method:methodName withArgs:args onComplete:NULL];
}

- (void)invokeModule:(NSString *)moduleName
              method:(NSString *)methodName
            withArgs:(NSArray *)args
          onComplete:(dispatch_block_t)onComplete
{
<<<<<<< HEAD
#ifndef RCT_FIT_RM_OLD_RUNTIME
=======
>>>>>>> 2c830f7d0232ead70791aff6968a0e95ce850767
  RCTBridge *bridge = _bridge;
  if (bridge) {
    [bridge enqueueJSCall:moduleName method:methodName args:args completion:onComplete];
    return;
  }
<<<<<<< HEAD
#endif // RCT_FIT_RM_OLD_RUNTIME
=======
>>>>>>> 2c830f7d0232ead70791aff6968a0e95ce850767

  if (_bridgelessJSModuleMethodInvoker) {
    _bridgelessJSModuleMethodInvoker(moduleName, methodName, args, onComplete);
  }
}

@end
