<<<<<<< HEAD
import { CodedError, UnavailabilityError } from 'expo-modules-core';
=======
import { CodedError } from 'expo-modules-core';
>>>>>>> 2c830f7d0232ead70791aff6968a0e95ce850767

import ExpoFontLoader from './ExpoFontLoader';
import { FontSource } from './Font.types';
import { getAssetForSource, loadSingleFontAsync } from './FontLoader';

/**
 * @returns the server resources that should be statically extracted.
 * @private
 */
export function getServerResources(): string[] {
<<<<<<< HEAD
  if (!ExpoFontLoader.getServerResources) {
    throw new UnavailabilityError('expo-font', 'getServerResources');
  }
=======
>>>>>>> 2c830f7d0232ead70791aff6968a0e95ce850767
  return ExpoFontLoader.getServerResources();
}

/**
 * @returns clear the server resources from the global scope.
 * @private
 */
export function resetServerContext() {
<<<<<<< HEAD
  if (!ExpoFontLoader.resetServerContext) {
    throw new UnavailabilityError('expo-font', 'resetServerContext');
  }
=======
>>>>>>> 2c830f7d0232ead70791aff6968a0e95ce850767
  return ExpoFontLoader.resetServerContext();
}

export function registerStaticFont(fontFamily: string, source?: FontSource | null) {
  // MUST BE A SYNC FUNCTION!
  if (!source) {
    throw new CodedError(
      `ERR_FONT_SOURCE`,
      `Cannot load null or undefined font source: { "${fontFamily}": ${source} }. Expected asset of type \`FontSource\` for fontFamily of name: "${fontFamily}"`
    );
  }
  const asset = getAssetForSource(source);

  loadSingleFontAsync(fontFamily, asset);
}
